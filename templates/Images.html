{% extends "layout.html" %}

{% block content %}
<div class="container mt-4">
    <h1>Generated Images</h1>
    <div id="imageGallery" class="gallery row">
        <!-- Images will be loaded here via JavaScript -->
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        fetch('/api/generated-images') 
            .then(response => response.json())
            .then(imageFiles => {
                const gallery = document.getElementById('imageGallery');
                imageFiles.forEach(filename => {
                    // Create anchor element for Lightbox
                    const anchor = document.createElement('a');
                    anchor.href = `/static/generated_images/${filename}`;
                    anchor.setAttribute('data-lightbox', 'image-gallery');
                    anchor.classList.add('col-md-4', 'mb-4'); // Bootstrap grid classes

                    // Create image element
                    const img = document.createElement('img');
                    img.src = `/static/generated_images/${filename}`;
                    img.classList.add('img-fluid', 'img-thumbnail'); // Bootstrap image classes
                    img.alt = 'Generated Image'; // Alt text for accessibility

                    // Append image to anchor, then anchor to gallery
                    anchor.appendChild(img);
                    gallery.appendChild(anchor);
                });
            })
            .catch(error => console.error('Error fetching images:', error));
    });
</script>
{% endblock %}
